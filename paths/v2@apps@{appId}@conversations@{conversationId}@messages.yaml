parameters:
  - $ref: "../components/parameters/appId.yaml"
  - $ref: "../components/parameters/conversationId.yaml"
post:
  tags:
    - Messages
  summary: Post Message
  operationId: postMessage
  description: Send a message in a particular conversation.
  security:
    - basicAuth: [integration, app, account]
    - bearerAuth: [integration, app, account]
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: "../components/requestBodies/messagePost.yaml"
        examples:
          $ref: "../components/examples/messageCreateRequest.yaml"
  responses:
    "201":
      description: Created
      content:
        application/json:
          schema:
            $ref: "../components/responses/messagePostResponse.yaml"
          examples:
            $ref: "../components/examples/messageCreateResponse.yaml"
get:
  tags:
    - Messages
  summary: List Messages
  operationId: listMessages
  description: |
    List all messages for a particular conversation. This API is paginated through
    [cursor pagination](#section/Introduction/API-pagination-and-records-limits), in the _backwards_ direction, with the
    most recent (i.e. last) page of messages being returned by default. The `hasMore` flag indicates whether more messages
    exist in the direction you are currently paginating through. To page backwards in the history, use the `beforeCursor` or follow the `prev`
    link. The page size limit is fixed at 100 messages per page.

    ```shell
    /v2/apps/:appId/conversations/:conversationId/messages?page[before]=5f32b88acf6bf25073b2be56
    ```
  security:
    - basicAuth: [integration, app, account]
    - bearerAuth: [integration, app, account]
  parameters:
    - $ref: "../components/parameters/pageQuery.yaml"
  responses:
    "200":
      description: Ok
      content:
        application/json:
          schema:
            $ref: "../components/responses/messageListResponse.yaml"
    "404":
      description: Message not found
delete:
  tags:
    - Messages
  summary: Delete All Messages
  operationId: deleteAllMessages
  description: Delete all messages of a particular conversation.
  security:
    - basicAuth: [integration, app, account]
    - bearerAuth: [integration, app, account]
  responses:
    "200":
      description: Ok
      content:
        application/json:
          schema:
            type: object
    "404":
      description: Not found
