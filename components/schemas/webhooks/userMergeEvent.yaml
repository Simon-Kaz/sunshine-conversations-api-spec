allOf:
  - $ref: "./eventSubSchema.yaml"
  - type: object
    properties:
      payload:
        type: object
        description: The payload of the event. The contents of this object depend on the type of event.
        properties:
          mergedUsers:
            type: object
            description: Contains information about the users that were merged together.
            properties:
              surviving:
                allOf:
                  - $ref: "../user.yaml"
                description: The user that now represents the merged user object. 
              discarded:
                allOf:  
                  - $ref: "../user.yaml"
                description: The user that was unified into the surviving user object. 
          mergedConversations:
            type: object
            description: Contains information about the conversations that were merged together
              as a result of the operation, if applicable. If no conversations were
              merged, this property is omitted.
            properties: 
              surviving:
                allOf:
                  - $ref: "../conversationTruncated.yaml"
                description: The conversation that now represents the merged conversation object.
              discarded:
                allOf:
                  - $ref: "../conversationTruncated.yaml"
                description: The conversation that was unified into the surviving conversation object.
            nullable: true
          discardedMetadata:
            allOf:
              - $ref: "../metadata.yaml"
            description: A flat object with the set of metadata properties that were discarded
              when merging the two users. This should contain values only if the
              combined metadata fields exceed the 4KB limit.
            nullable: true
title: user:merge
