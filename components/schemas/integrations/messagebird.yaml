allOf:
  - $ref: "../integration.yaml"
  - type: object
    description: |
      To configure a MessageBird integration, acquire the accessKey, the signingKey and the MessageBird number you would like to use, then call the Create Integration endpoint. The response will include the integration’s _id and webhookSecret, which must be used to configure the webhook in MessageBird.
      In the Flow Builder for the MessageBird number you’ve used to integrate, add a new step with the following settings:
      * Create a new Call HTTP endpoint with SMS flow.
      * Select your desired SMS number for Incoming SMS.
      * Click on Forward to URL and set its method to POST.
      * Then, using the integration _id and webhookSecret returned from the create integration call, enter the following into the URL field: 
      `https://app.smooch.io/api/messagebird/webhooks/{appId}/{integrationId}/{webhookSecret}`
      * Select application/json for the Set Content-Type header field.
      * Save and publish your changes.
    properties:
      type:
        type: string
        description: The type of integration.
        default: "messagebird"
      accessKey:
        type: string
        description: The public API key of your MessageBird account.
        minLength: 1
        writeOnly: true
        example: "9V2iJmd93kFJ390L9495JCl11"
      signingKey:
        type: string
        description: The signing key of your MessageBird account. Used to validate the webhooks' origin.
        minLength: 1
        writeOnly: true
        example: "Uu6N09Lkdji3820DJIO89I39sl9dJ"
      originator:
        type: string
        description: Sunshine Conversations will receive all messages sent to this phone number.
        minLength: 1
        example: "12262121021"
      webhookSecret:
        type: string
        description: The secret that is used to configure webhooks in MessageBird.
        readOnly: true
        example: "72ade38394d1da51566cede33bd1e67e"

    required:
      - accessKey
      - signingKey
      - originator
